function m(){}function F(t){return t()}function H(){return Object.create(null)}function $(t){t.forEach(F)}function P(t){return typeof t=="function"}function B(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}function J(t){return Object.keys(t).length===0}function U(t,e){t.appendChild(e)}function nt(t,e,n){const i=it(t);if(!i.getElementById(e)){const r=j("style");r.id=e,r.textContent=n,st(i,r)}}function it(t){if(!t)return document;const e=t.getRootNode?t.getRootNode():t.ownerDocument;return e&&e.host?e:t.ownerDocument}function st(t,e){return U(t.head||t,e),e.sheet}function q(t,e,n){t.insertBefore(e,n||null)}function V(t){t.parentNode&&t.parentNode.removeChild(t)}function j(t){return document.createElement(t)}function X(t,e,n,i){return t.addEventListener(e,n,i),()=>t.removeEventListener(e,n,i)}function _(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function rt(t){return Array.from(t.childNodes)}function at(t,e,{bubbles:n=!1,cancelable:i=!1}={}){const r=document.createEvent("CustomEvent");return r.initCustomEvent(t,n,i,e),r}function ot(t){const e={};for(const n of t)e[n.name]=n.value;return e}let x;function M(t){x=t}function ct(){if(!x)throw new Error("Function called outside component initialization");return x}function lt(){const t=ct();return(e,n,{cancelable:i=!1}={})=>{const r=t.$$.callbacks[e];if(r){const l=at(e,n,{cancelable:i});return r.slice().forEach(s=>{s.call(t,l)}),!l.defaultPrevented}return!0}}const w=[],T=[];let p=[];const z=[],ut=Promise.resolve();let D=!1;function ft(){D||(D=!0,ut.then(E))}function R(t){p.push(t)}function dt(t){z.push(t)}const S=new Set;let y=0;function E(){if(y!==0)return;const t=x;do{try{for(;y<w.length;){const e=w[y];y++,M(e),ht(e.$$)}}catch(e){throw w.length=0,y=0,e}for(M(null),w.length=0,y=0;T.length;)T.pop()();for(let e=0;e<p.length;e+=1){const n=p[e];S.has(n)||(S.add(n),n())}p.length=0}while(w.length);for(;z.length;)z.pop()();D=!1,S.clear(),M(t)}function ht(t){if(t.fragment!==null){t.update(),$(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(R)}}function _t(t){const e=[],n=[];p.forEach(i=>t.indexOf(i)===-1?e.push(i):n.push(i)),n.forEach(i=>i()),p=e}const A=new Set;let mt;function G(t,e){t&&t.i&&(A.delete(t),t.i(e))}function gt(t,e,n,i){if(t&&t.o){if(A.has(t))return;A.add(t),mt.c.push(()=>{A.delete(t),i&&(n&&t.d(1),i())}),t.o(e)}else i&&i()}function bt(t,e,n){const i=t.$$.props[e];i!==void 0&&(t.$$.bound[i]=n,n(t.$$.ctx[i]))}function vt(t){t&&t.c()}function K(t,e,n,i){const{fragment:r,after_update:l}=t.$$;r&&r.m(e,n),i||R(()=>{const s=t.$$.on_mount.map(F).filter(P);t.$$.on_destroy?t.$$.on_destroy.push(...s):$(s),t.$$.on_mount=[]}),l.forEach(R)}function L(t,e){const n=t.$$;n.fragment!==null&&(_t(n.after_update),$(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function yt(t,e){t.$$.dirty[0]===-1&&(w.push(t),ft(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function Q(t,e,n,i,r,l,s,o=[-1]){const u=x;M(t);const a=t.$$={fragment:null,ctx:[],props:l,update:m,not_equal:r,bound:H(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(u?u.$$.context:[])),callbacks:H(),dirty:o,skip_bound:!1,root:e.target||u.$$.root};s&&s(a.root);let d=!1;if(a.ctx=n?n(t,e.props||{},(h,g,...c)=>{const k=c.length?c[0]:g;return a.ctx&&r(a.ctx[h],a.ctx[h]=k)&&(!a.skip_bound&&a.bound[h]&&a.bound[h](k),d&&yt(t,h)),g}):[],a.update(),d=!0,$(a.before_update),a.fragment=i?i(a.ctx):!1,e.target){if(e.hydrate){const h=rt(e.target);a.fragment&&a.fragment.l(h),h.forEach(V)}else a.fragment&&a.fragment.c();e.intro&&G(t.$$.fragment),K(t,e.target,e.anchor,e.customElement),E()}M(u)}let W;typeof HTMLElement=="function"&&(W=class extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){const{on_mount:t}=this.$$;this.$$.on_disconnect=t.map(F).filter(P);for(const e in this.$$.slotted)this.appendChild(this.$$.slotted[e])}attributeChangedCallback(t,e,n){this[t]=n}disconnectedCallback(){$(this.$$.on_disconnect)}$destroy(){L(this,1),this.$destroy=m}$on(t,e){if(!P(e))return m;const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const i=n.indexOf(e);i!==-1&&n.splice(i,1)}}$set(t){this.$$set&&!J(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}});class wt{$destroy(){L(this,1),this.$destroy=m}$on(e,n){if(!P(n))return m;const i=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return i.push(n),()=>{const r=i.indexOf(n);r!==-1&&i.splice(r,1)}}$set(e){this.$$set&&!J(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}function Et(t){nt(t,"svelte-1pz6v9y",'.canvas.svelte-1pz6v9y{cursor:pointer}[data-disabled="true"]{opacity:0.5;pointer-events:none}')}function pt(t){let e,n,i,r,l;return{c(){e=j("div"),n=j("canvas"),_(n,"style",i=`${t[2]||""}`),_(n,"data-disabled",t[3]),_(n,"class","canvas svelte-1pz6v9y"),_(n,"width",t[0]),_(n,"height",t[1]),_(n,"id","root-canvas"),_(e,"class","canvas-wrapper")},m(s,o){q(s,e,o),U(e,n),t[7](n),r||(l=[X(n,"mouseover",t[8]),X(n,"click",t[9])],r=!0)},p(s,[o]){o&4&&i!==(i=`${s[2]||""}`)&&_(n,"style",i),o&8&&_(n,"data-disabled",s[3]),o&1&&_(n,"width",s[0]),o&2&&_(n,"height",s[1])},i:m,o:m,d(s){s&&V(e),t[7](null),r=!1,$(l)}}}function $t(t,e,n){let{width:i=500}=e,{height:r=500}=e,{value:l=null}=e,{styleElement:s}=e,{disabled:o}=e,u;const a=lt();function d(c){T[c?"unshift":"push"](()=>{u=c,n(4,u)})}const h=c=>{a("hover")},g=c=>{a("click")};return t.$$set=c=>{"width"in c&&n(0,i=c.width),"height"in c&&n(1,r=c.height),"value"in c&&n(6,l=c.value),"styleElement"in c&&n(2,s=c.styleElement),"disabled"in c&&n(3,o=c.disabled)},t.$$.update=()=>{if(t.$$.dirty&8&&console.log("disabled",o),t.$$.dirty&19&&u){let c=u.getContext("2d");n(6,l={ctx:c,width:i,height:r,density:i/r})}},[i,r,s,o,u,a,l,d,h,g]}class kt extends wt{constructor(e){super(),Q(this,e,$t,pt,B,{width:0,height:1,value:6,styleElement:2,disabled:3},Et)}}function Ct(t){let e,n,i;function r(s){t[7](s)}let l={width:70,height:55,disabled:t[1]?JSON.parse(t[1]):!1,styleElement:t[0]};return t[2]!==void 0&&(l.value=t[2]),e=new kt({props:l}),T.push(()=>bt(e,"value",r)),e.$on("hover",t[3]),e.$on("click",t[4]),{c(){vt(e.$$.fragment),this.c=m},m(s,o){K(e,s,o),i=!0},p(s,[o]){const u={};o&2&&(u.disabled=s[1]?JSON.parse(s[1]):!1),o&1&&(u.styleElement=s[0]),!n&&o&4&&(n=!0,u.value=s[2],dt(()=>n=!1)),e.$set(u)},i(s){i||(G(e.$$.fragment,s),i=!0)},o(s){gt(e.$$.fragment,s),i=!1},d(s){L(e,s)}}}const Mt=20;function xt(t,e,n){let{direction:i}=e,{styleElement:r=""}=e,{disabled:l}=e,s,o=Mt,u,a,d;function h(){s&&(a="IN",c())}function g(){const{ctx:f,width:I,height:v}=s;f.beginPath(),f.arc(d.circle.x,30,o,0,2*Math.PI),f.stroke()}function c(){const{ctx:f}=s;if(a==="DONE"){cancelAnimationFrame(u);return}switch(a){case"IN":o-=2,o===10&&(a="OUT");break;case"OUT":o+=2,o===20&&(a="DONE");break}f.clearRect(0,0,70,55),k(d.arrow.x,30,d.arrow.toX,30),g(),u=requestAnimationFrame(c)}function k(f,I,v,C){const{ctx:b,width:Ot,height:At}=s;let N=10,tt=v-f,et=C-I,O=Math.atan2(et,tt);b.beginPath(),b.moveTo(f,I),b.lineTo(v,C),b.lineTo(v-N*Math.cos(O-Math.PI/6),C-N*Math.sin(O-Math.PI/6)),b.moveTo(v,C),b.lineTo(v-N*Math.cos(O+Math.PI/6),C-N*Math.sin(O+Math.PI/6)),b.stroke()}function Y(){console.log("posted"),window.postMessage({source:"arrow",message:"clicked",data:i})}function Z(f){s=f,n(2,s)}return t.$$set=f=>{"direction"in f&&n(5,i=f.direction),"styleElement"in f&&n(0,r=f.styleElement),"disabled"in f&&n(1,l=f.disabled)},t.$$.update=()=>{t.$$.dirty&32&&i&&n(6,d={arrow:{x:i==="left"?0:65,toX:i==="left"?50:15},circle:{x:i==="left"?45:20}}),t.$$.dirty&100&&s&&i&&(g(),k(d.arrow.x,30,d.arrow.toX,30))},[r,l,s,h,Y,i,d,Z]}class Nt extends W{constructor(e){super(),Q(this,{target:this.shadowRoot,props:ot(this.attributes),customElement:!0},xt,Ct,B,{direction:5,styleElement:0,disabled:1},null),e&&(e.target&&q(e.target,this,e.anchor),e.props&&(this.$set(e.props),E()))}static get observedAttributes(){return["direction","styleElement","disabled"]}get direction(){return this.$$.ctx[5]}set direction(e){this.$$set({direction:e}),E()}get styleElement(){return this.$$.ctx[0]}set styleElement(e){this.$$set({styleElement:e}),E()}get disabled(){return this.$$.ctx[1]}set disabled(e){this.$$set({disabled:e}),E()}}customElements.define("canvas-arrow",Nt);
